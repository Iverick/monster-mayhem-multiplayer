<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Monster Mayhem</title>
    <link rel="stylesheet" href="/styles/game.css" />
  </head>
  <body>
    <nav class="navbar">
      <a class="logo">Monster Mayhem</a>
      <div class="user-info-container">
        <span class="username"><%= user.username %></span>
        <form action="/logout" method="POST" class="logout-form">
          <button class="logout-button" type="submit">Logout</button>
        </form>
      </div>
    </nav>

    <!-- full screen board overlay -->
    <div id="game-controls" class="overlay">
      <p id="waiting-message">Waiting for another player to join...</p>

      <div class="overlay-button-group">
        <button id="start-button" disabled>Start Game</button>
        <button id="leave-lobby-button" class="enabled">Leave This Lobby</button>
      </div>
    </div>

    <!-- player stats section -->
    <div id="player-stats" class="player-stats">
      <div id="player-even-stats" class="player-stats even">
        <h3 id="player-even-username"></h3>
        <p>Games Played: <span id="player-even-games"></span></p>
        <p>Wins: <span id="player-even-wins"></span></p>
        <p>Losses: <span id="player-even-losses"></span></p>
      </div>

      <div id="player-odd-stats" class="player-stats odd">
        <h3 id="player-odd-username"></h3>
        <p>Games Played: <span id="player-odd-games"></span></p>
        <p>Wins: <span id="player-odd-wins"></span></p>
        <p>Losses: <span id="player-odd-losses"></span></p>
      </div>
    </div>

    <div class="game-container">
      <!-- board placeholder -->
      <div class="board" id="board"></div>

      <div id="waiting-turn-msg" class="waiting-turn-msg"></div>

      <div id="end-turn" class="end-turn">
        <button id="end-turn-button" class="end-turn-button">End Turn</button>
      </div>

      <!-- game hints section -->
      <div id="game-hints" class="game-hints">
        <h4>Game Hints</h4>
        <ul>
          <li>You can move <strong>your monsters</strong> (highlighted in <span id="player-color-indicator"></span>).</li>
          <li>Click a monster to see its possible moves.</li>
        </ul>
      </div>
    </div>

    <script src="/js/clientHelpers.js"></script>
    <script src="/js/game.js"></script>
    <script>
      // Inject username variable into the game script
      const username = "<%= user.username %>";

      <% if (typeof gameId !== 'undefined' && gameId) { %>
        const gameId = "<%= gameId %>";
      <% } else { %>
        const gameId = null;
      <% } %>
    </script>
  </body>
</html>
